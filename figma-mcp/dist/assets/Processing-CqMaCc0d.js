import{j as e,m as o,A}from"./animation-vendor-DKe1aVHR.js";import{r as c}from"./react-vendor-KfUPlHYY.js";import{u as v,a as I}from"./useReducedMotion-CCEAq7mT.js";import{c as d,b as x,L as M,W as u,B as f,R as E,d as C,e as $,a as P}from"./index-Bvit5jpF.js";import{C as S,S as T}from"./share-2-CDhSW6-3.js";import"./utils-vendor-CLnxGgY3.js";import"./client-D04NRy9h.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],L=d("circle",R);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],N=d("database",F);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],W=d("file-code",O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],G=d("git-branch",q);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],B=d("pen-tool",V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],J=d("shield-check",D);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Y=d("sparkles",U),y=c.memo(({label:n,status:a,icon:r,delay:s=0})=>e.jsxs("div",{className:"flex flex-col items-center gap-3 relative group",children:[e.jsxs(o.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:s,duration:.5},className:x("relative flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-500",a==="idle"&&"border-white/5 bg-white/5 text-text-tertiary",a==="running"&&"border-accent-primary bg-accent-primary/10 text-accent-primary shadow-[0_0_30px_rgba(0,80,255,0.4)]",a==="completed"&&"border-accent-secondary bg-accent-secondary/10 text-accent-secondary shadow-[0_0_20px_rgba(0,214,255,0.3)]",a==="error"&&"border-accent-error bg-accent-error/10 text-accent-error"),children:[a==="running"&&e.jsx(o.div,{className:"absolute inset-[-4px] rounded-full border border-accent-primary/50",initial:{scale:1,opacity:1},animate:{scale:1.5,opacity:0},transition:{duration:1.5,repeat:1/0,ease:"easeOut"}}),e.jsx("div",{className:"relative z-10",children:a==="running"?e.jsxs("div",{className:"relative",children:[e.jsx(M,{size:24,className:"animate-spin absolute -inset-1 opacity-50"}),r]}):a==="completed"?e.jsxs("div",{className:"relative",children:[r,e.jsx("div",{className:"absolute -bottom-2 -right-2 bg-accent-secondary rounded-full p-0.5 text-bg-primary",children:e.jsx(S,{size:10,strokeWidth:4})})]}):r||e.jsx(L,{size:12,fill:"currentColor",className:"opacity-50"})})]}),e.jsx(o.span,{animate:{opacity:a==="idle"?.4:1,y:a==="running"?-2:0,color:a==="error"?"#FF3333":a==="completed"?"#00D6FF":a==="running"?"#0050FF":"rgba(255,255,255,0.6)"},className:x("text-xs md:text-sm font-medium tracking-wide text-center uppercase transition-colors duration-300",a==="running"&&"font-bold shadow-glow-text"),children:n})]}));y.displayName="AgentNode";const p=[{id:"ingest",label:"Ingest",icon:e.jsx(N,{}),description:"Reading your data files"},{id:"normalize",label:"Normalize",icon:e.jsx(W,{}),description:"Standardizing data format"},{id:"phase",label:"Phase Detection",icon:e.jsx(G,{}),description:"Identifying life phases"},{id:"trajectory",label:"Trajectory",icon:e.jsx(B,{}),description:"Mapping your direction"},{id:"narrative",label:"Narrative",icon:e.jsx(Y,{}),description:"Generating insights"},{id:"export",label:"Export",icon:e.jsx(T,{}),description:"Preparing results"}],H=({currentAgent:n,jobStatus:a})=>{const r=v(),s=c.useMemo(()=>a==="completed"?p.length:n?p.findIndex(t=>t.id===n):-1,[n,a]),m=Math.min(s/(p.length-1)*100,100);return e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 py-12",role:"group","aria-label":"Analysis pipeline stages",children:[e.jsxs("div",{className:"hidden md:flex items-center justify-between relative z-10 w-full",children:[e.jsx("div",{className:"absolute top-6 left-0 w-full h-0.5 bg-white/10 -z-10","aria-hidden":"true"}),e.jsx(o.div,{initial:{width:"0%"},animate:{width:`${m}%`},transition:r?{duration:0}:{duration:.5,ease:"easeInOut"},className:"absolute top-6 left-0 h-0.5 bg-gradient-to-r from-accent-primary to-accent-secondary -z-10 shadow-[0_0_15px_rgba(0,80,255,0.5)]","aria-hidden":"true"}),p.map((t,l)=>{let i="idle";return l<s?i="completed":l===s&&(i=a==="failed"?"error":"running"),e.jsx("div",{role:"listitem","aria-label":`${t.label}: ${i==="completed"?"Complete":i==="running"?"In progress":i==="error"?"Error":"Pending"}`,"aria-current":i==="running"?"step":void 0,children:e.jsx(y,{label:t.label,status:i,icon:t.icon,delay:r?0:l*.1})},t.id)})]}),e.jsxs("div",{className:"md:hidden flex flex-col gap-8 relative pl-6 border-l border-white/10 ml-6",role:"list","aria-label":"Analysis stages",children:[e.jsx(o.div,{initial:{height:"0%"},animate:{height:`${m}%`},transition:r?{duration:0}:{duration:.5,ease:"easeInOut"},className:"absolute top-0 left-[-1px] w-0.5 bg-gradient-to-b from-accent-primary to-accent-secondary shadow-[0_0_15px_rgba(0,80,255,0.5)]",style:{width:"2px"},"aria-hidden":"true"}),p.map((t,l)=>{let i="idle";return l<s?i="completed":l===s&&(i=a==="failed"?"error":"running"),e.jsxs("div",{className:"flex items-center gap-4 relative",role:"listitem","aria-label":`${t.label}: ${i==="completed"?"Complete":i==="running"?"In progress":i==="error"?"Error":"Pending"}`,"aria-current":i==="running"?"step":void 0,children:[e.jsx("div",{className:"absolute left-[-34px]",children:e.jsx(y,{label:"",status:i,icon:t.icon,delay:r?0:l*.1})}),e.jsx("span",{className:x("text-sm font-medium uppercase tracking-wider transition-colors duration-300 ml-4",i==="idle"?"text-text-secondary":"text-text-primary"),children:t.label})]},t.id)})]})]})},K={upload:{icon:u,title:"Upload didn't complete",message:"The connection was interrupted. Your files are safe locally."},polling:{icon:u,title:"Lost connection to analysis",message:"We'll try to reconnect automatically."},fetch:{icon:u,title:"Couldn't load your results",message:"The server might be busy. Let's try again."},timeout:{icon:u,title:"This is taking longer than expected",message:"The analysis might still be running. You can wait or try again."}};function Q({type:n,onRetry:a,onUseDemoData:r}){const s=K[n],m=s.icon;return e.jsxs(o.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"w-full max-w-md mx-auto p-8 rounded-2xl bg-bg-secondary border border-white/5 text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-4 rounded-full bg-white/5 border border-white/10",children:e.jsx(m,{size:28,className:"text-text-secondary"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-display font-medium text-text-primary",children:s.title}),e.jsx("p",{className:"text-sm text-text-secondary",children:s.message})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[a&&e.jsx(f,{variant:"primary",onClick:a,leftIcon:e.jsx(E,{size:16}),fullWidth:!0,children:"Try again"}),r&&e.jsx(f,{variant:"secondary",onClick:r,leftIcon:e.jsx(N,{size:16}),fullWidth:!0,children:"Use sample data instead"})]})]})}const b=["Organizing your activity data...","Identifying meaningful patterns...","Looking for long-term signals...","Generating your reflection...","Preparing your results..."];function ne(){const n=C(),{jobId:a,status:r,error:s,reset:m}=$(),{jobStatus:t}=I(),l=P(),i=v(),[h,j]=c.useState(0),[w,g]=c.useState(!1);c.useEffect(()=>{if(!a){n("/");return}const _=setInterval(()=>{j(z=>(z+1)%b.length)},3e3);return()=>clearInterval(_)},[a,n]),c.useEffect(()=>{t!=null&&t.currentAgent&&l(`Now running: ${t.currentAgent} agent`,"polite")},[t==null?void 0:t.currentAgent,l]),c.useEffect(()=>{(r==="failed"||s)&&(g(!0),l("Analysis encountered an error","assertive"))},[r,s,l]),c.useEffect(()=>{(t==null?void 0:t.status)==="completed"&&(l("Analysis complete! Loading your results.","polite"),setTimeout(()=>n("/results"),1500))},[t==null?void 0:t.status,n,l]);const k=()=>{g(!1),m(),n("/")};return w?e.jsx("div",{className:"min-h-screen bg-bg-primary flex items-center justify-center p-6",children:e.jsx(Q,{type:"polling",onRetry:k,onUseDemoData:()=>n("/results")})}):e.jsxs("div",{className:"min-h-screen bg-bg-primary flex flex-col items-center justify-center relative overflow-hidden",role:"region","aria-label":"Analysis in progress","aria-live":"polite",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(0,80,255,0.03),transparent_70%)] pointer-events-none","aria-hidden":"true"}),e.jsxs("div",{className:"relative z-10 w-full max-w-5xl px-6 flex flex-col items-center gap-12 text-center",children:[e.jsxs("header",{className:"space-y-4",children:[e.jsx(o.h1,{initial:i?{}:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-4xl md:text-5xl font-display font-bold text-text-primary",children:"Analyzing your patterns"}),e.jsx(o.p,{initial:i?{}:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.8},className:"text-text-secondary text-lg",children:"This usually takes under a minute."})]}),e.jsx(o.div,{initial:i?{}:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.8},className:"w-full",role:"progressbar","aria-label":"Analysis progress","aria-valuenow":(t==null?void 0:t.progress)||0,"aria-valuemin":0,"aria-valuemax":100,children:e.jsx(H,{currentAgent:(t==null?void 0:t.currentAgent)||"ingest",jobStatus:(t==null?void 0:t.status)||"processing"})}),e.jsx("div",{className:"h-8 flex items-center justify-center w-full max-w-md mx-auto relative cursor-default","aria-live":"polite","aria-atomic":"true",children:e.jsx(A,{mode:"wait",children:e.jsx(o.p,{initial:i?{}:{opacity:0,y:10},animate:{opacity:1,y:0},exit:i?{}:{opacity:0,y:-10},transition:{duration:.5},className:"absolute text-accent-primary font-medium tracking-wide",children:b[h]},h)})})]}),e.jsxs(o.footer,{initial:i?{}:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:1},className:"absolute bottom-8 flex items-center gap-2 text-text-tertiary text-xs",children:[e.jsx(J,{size:14,className:"text-accent-primary","aria-hidden":"true"}),e.jsx("span",{children:"Processing securely. No data leaves your session until verified."})]})]})}export{ne as Processing};
//# sourceMappingURL=Processing-CqMaCc0d.js.map
